# vim: foldmethod=marker

set-option -g prefix c-a
unbind-key c-a
bind-key c-a send-prefix


# Settings {{{

setw -g mouse on # Enable mouse scrolling

set -g status-interval 1

set -g default-terminal "screen-256color"
set -ga terminal-overrides ",*256col*:Tc"

set -g status-justify centre
set-option -g status-position top

set -g base-index 1
set -s escape-time 0

set -g status-fg default
set-option -g status-style bg=default

set -g window-status-current-style "bold"
setw -g window-status-format '#[fg=#979BAC] #I #W'
setw -g window-status-current-format '#[bold,nounderscore,noitalics] #I #W'
# }}}

# sessions {{{
bind-key space run-shell -b "~/code/github/dotfiles/.config/tmux/session.sh"

# vim-like pane switching
bind -r k select-pane -U
bind -r j select-pane -D
bind -r h select-pane -L
bind -r l select-pane -R

bind-key R source-file ~/.tmux.conf \; display-message "Config reloaded..."

bind-key v split-window -h
bind-key s split-window -v
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

# Moving window
bind-key -n C-S-Left swap-window -t -1 \; previous-window
bind-key -n C-S-Right swap-window -t +1 \; next-window

# }}}

# Status settings {{{
current_day="%a %d %b"
current_time="%R %Z"

set -g status-left "$current_day #[fg=#c6c8d1]$current_time #{pomodoro_status} #{battery_level}"
set -g status-left-style "fg=#979BAC"
set -g status-left-length 30

set -g status-right "‚ô´ #{music_status} #{artist}: #{track}"

# }}}

# Plugins {{{ 
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'olimorris/tmux-pomodoro-plus'
set -g @plugin 'robhurring/tmux-spotify'
set -g @plugin 'pwittchen/tmux-plugin-battery'

# }}}

# Pomodoro Settings {{{
# Options
set -g @pomodoro_mins 25
set -g @pomodoro_break_mins 5
set -g @pomodoro_on " #[fg=$text_red]üçÖ "
set -g @pomodoro_complete " #[fg=$text_green]üçÖ "

# Keybindings - Default bindings are prefix + p
set -g @pomodoro_start 'a'
set -g @pomodoro_cancel 'A'

# }}}

run '~/.tmux/plugins/tpm/tpm'
